{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Microsoft\\\\Documents\\\\capstone3\\\\capstone3\\\\src\\\\components\\\\staffComponents\\\\ViewLocation.jsx\";\n\n/* View location page */\nimport React, { Component } from 'react';\nimport { Container, Button, Alert, Table, Col, Row } from 'react-bootstrap';\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\nimport LocationServiceApi from '../../api/LocationServiceApi';\nimport CarServiceApi from '../../api/CarServiceApi';\n\nclass ViewLocation extends Component {\n  constructor(_props) {\n    super(_props);\n\n    this.onMarkerClick = (props, marker, e) => this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true\n    });\n\n    this.onClose = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    };\n\n    this.state = {\n      location: '',\n      errMessage: '',\n      cars: [],\n      successMessage: '',\n      activeMarker: {},\n      showingInfoWindow: false,\n      selectedPlace: {},\n      isLoading: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.location.state !== undefined) {\n      this.setState({\n        successMessage: this.props.location.state.success\n      });\n    } // fetch location details by id\n\n\n    LocationServiceApi.getLocationFromId(this.props.match.params.id).then(res => {\n      LocationServiceApi.getGeocodeFromAddress(res.data.address).then(newRes => {\n        // Create object with address, latitude and longitude\n        let locationObject = {\n          id: res.data._id,\n          address: res.data.address,\n          name: res.data.name,\n          lat: newRes.data.results[0].geometry.location.lat,\n          lng: newRes.data.results[0].geometry.location.lng,\n          cars: res.data.cars\n        }; // set new location object to react state array\n\n        this.setState({\n          location: locationObject,\n          isLoading: true\n        });\n      });\n      res.data.cars.forEach(carId => {\n        CarServiceApi.getCar(carId).then(res => {\n          this.state.cars.push(res.data.car);\n          this.setState({\n            cars: this.state.cars\n          });\n        });\n      });\n    }).catch(err => {\n      this.setState({\n        errMessage: err.response\n      });\n    });\n  }\n\n  render() {\n    const {\n      location\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, this.state.successMessage && /*#__PURE__*/React.createElement(Alert, {\n      variant: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Alert.Heading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    }, \"Add car succeed!\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }, this.state.successMessage)), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }, \"Location details:\"), /*#__PURE__*/React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    }, \"id\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, \"name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 29\n      }\n    }, \"address\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 29\n      }\n    }, location.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, location.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 29\n      }\n    }, location.address), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      href: `/admin/modify/location/${location.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 33\n      }\n    }, \"Modify\"))))), /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }\n    }, this.state.isLoading && /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '400px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 46\n      }\n    }, /*#__PURE__*/React.createElement(Map, {\n      google: this.props.google,\n      initialCenter: {\n        lat: this.state.location.lat,\n        lng: this.state.location.lng\n      },\n      style: {\n        height: '400px',\n        width: '50%'\n      },\n      zoom: 14,\n      onClick: this.mapOnMapClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Marker, {\n      id: this.state.location.id,\n      name: this.state.location.name,\n      address: this.state.location.address,\n      onClick: this.mapOnMarkerClick,\n      position: {\n        lat: this.state.location.lat,\n        lng: this.state.location.lng\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(InfoWindow, {\n      onClose: this.onInfoWindowClose,\n      marker: this.state.activeMarker,\n      visible: this.state.showingInfoWindow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"info-window\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 37\n      }\n    }, this.state.selectedPlace.name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 37\n      }\n    }, this.state.selectedPlace.address), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/locations/\" + this.state.selectedPlace.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 37\n      }\n    }, \"Check out this location\")))))), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, \"Cars here:\"), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, this.state.cars.length !== 0 ? this.state.cars.map(car => /*#__PURE__*/React.createElement(CarDescriptionComponent, {\n      car: car,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 25\n      }\n    })) : /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 25\n      }\n    }, \"Garage empty\")));\n  }\n\n}\n\nfunction CarDescriptionComponent(props) {\n  // car description component card\n  const {\n    car\n  } = props;\n  return /*#__PURE__*/React.createElement(Col, {\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cars-div-white\",\n    style: {\n      'border': 'solid black 2px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: car.image,\n    alt: \"car\",\n    width: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      marginTop: '1vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, car.make), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      marginTop: '1vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, car.driver), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, car.fueltype, \", \", car.bodytype, \", \", car.seats, \" seaters, \", car.colour), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, \"Php\", car.costperhour, \" per hour\"), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, \"Number Plate: \", car.numberplate), /*#__PURE__*/React.createElement(\"a\", {\n    href: `/admin/view/cars/${car._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 57\n    }\n  }, \"Car ID: \"), car._id)));\n}\n\nexport default GoogleApiWrapper({\n  apiKey: process.env.REACT_APP_API_KEY\n})(ViewLocation);","map":{"version":3,"sources":["C:/Users/Microsoft/Documents/capstone3/capstone3/src/components/staffComponents/ViewLocation.jsx"],"names":["React","Component","Container","Button","Alert","Table","Col","Row","Map","InfoWindow","Marker","GoogleApiWrapper","LocationServiceApi","CarServiceApi","ViewLocation","constructor","props","onMarkerClick","marker","e","setState","selectedPlace","activeMarker","showingInfoWindow","onClose","state","location","errMessage","cars","successMessage","isLoading","componentDidMount","undefined","success","getLocationFromId","match","params","id","then","res","getGeocodeFromAddress","data","address","newRes","locationObject","_id","name","lat","results","geometry","lng","forEach","carId","getCar","push","car","catch","err","response","render","height","google","width","mapOnMapClick","mapOnMarkerClick","onInfoWindowClose","length","map","CarDescriptionComponent","image","marginTop","make","driver","fueltype","bodytype","seats","colour","costperhour","numberplate","apiKey","process","env","REACT_APP_API_KEY"],"mappings":"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","sourcesContent":["/* View location page */\r\nimport React, { Component } from 'react';\r\nimport { Container, Button, Alert, Table, Col, Row } from 'react-bootstrap';\r\nimport { Map, InfoWindow, Marker, GoogleApiWrapper } from 'google-maps-react';\r\nimport LocationServiceApi from '../../api/LocationServiceApi';\r\nimport CarServiceApi from '../../api/CarServiceApi';\r\n\r\nclass ViewLocation extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            location: '',\r\n            errMessage: '',\r\n            cars: [],\r\n            successMessage: '',\r\n            activeMarker: {},\r\n            showingInfoWindow: false,\r\n            selectedPlace: {},\r\n            isLoading: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.location.state !== undefined) {\r\n            this.setState({\r\n                successMessage: this.props.location.state.success\r\n            });\r\n        }\r\n        // fetch location details by id\r\n        LocationServiceApi.getLocationFromId(this.props.match.params.id).then(res => {\r\n            LocationServiceApi.getGeocodeFromAddress(res.data.address)\r\n                .then(newRes => {\r\n                    // Create object with address, latitude and longitude\r\n                    let locationObject = {\r\n                        id: res.data._id,\r\n                        address: res.data.address,\r\n                        name: res.data.name,\r\n                        lat: newRes.data.results[0].geometry.location.lat,\r\n                        lng: newRes.data.results[0].geometry.location.lng,\r\n                        cars: res.data.cars\r\n                    };\r\n                    // set new location object to react state array\r\n                    this.setState({\r\n                        location: locationObject,\r\n                        isLoading: true\r\n                    });\r\n                });\r\n            res.data.cars.forEach(carId => {\r\n                CarServiceApi.getCar(carId).then(res => {\r\n                    this.state.cars.push(res.data.car);\r\n                    this.setState({\r\n                        cars: this.state.cars\r\n                    });\r\n                });\r\n            });\r\n        }).catch(err => {\r\n            this.setState({\r\n                errMessage: err.response\r\n            });\r\n        });\r\n    }\r\n\r\n    onMarkerClick = (props, marker, e) =>\r\n    this.setState({\r\n      selectedPlace: props,\r\n      activeMarker: marker,\r\n      showingInfoWindow: true\r\n    });\r\n\r\n  onClose = props => {\r\n    if (this.state.showingInfoWindow) {\r\n      this.setState({\r\n        showingInfoWindow: false,\r\n        activeMarker: null\r\n      });\r\n    }\r\n  };\r\n    render() {\r\n        const { location } = this.state;\r\n\r\n        return (\r\n            <Container>\r\n                {this.state.successMessage &&\r\n                    <Alert variant=\"success\">\r\n                        <Alert.Heading>Add car succeed!</Alert.Heading>\r\n                        <p>\r\n                            {this.state.successMessage}\r\n                        </p>\r\n                    </Alert>\r\n                }\r\n                <h2>Location details:</h2>\r\n                <Table striped bordered hover>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>id</th>\r\n                            <th>name</th>\r\n                            <th>address</th>\r\n                            <th></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>{location.id}</td>\r\n                            <td>{location.name}</td>\r\n                            <td>{location.address}</td>\r\n                            <td><Button href={`/admin/modify/location/${location.id}`}>Modify</Button></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </Table>\r\n                <Container>\r\n                    {this.state.isLoading && <div style={{ height: '400px' }}>\r\n                        <Map google={this.props.google}\r\n                            initialCenter={{\r\n                                lat: this.state.location.lat,\r\n                                lng: this.state.location.lng\r\n                            }}\r\n                            style={{ height: '400px', width: '50%' }}\r\n                            zoom={14}\r\n                            onClick={this.mapOnMapClick}>\r\n\r\n                            <Marker\r\n                                id={this.state.location.id}\r\n                                name={this.state.location.name}\r\n                                address={this.state.location.address}\r\n                                onClick={this.mapOnMarkerClick}\r\n                                position={{ lat: this.state.location.lat, lng: this.state.location.lng }}\r\n                            />\r\n\r\n                            <InfoWindow\r\n                                onClose={this.onInfoWindowClose}\r\n                                marker={this.state.activeMarker}\r\n                                visible={this.state.showingInfoWindow}>\r\n                                <div id=\"info-window\">\r\n                                    <h2>{this.state.selectedPlace.name}</h2>\r\n                                    <p>{this.state.selectedPlace.address}</p>\r\n                                    <a href={\"/locations/\" + this.state.selectedPlace.id}>Check out this location</a>\r\n                                </div>\r\n                            </InfoWindow>\r\n                        </Map>\r\n                    </div>}\r\n                </Container>\r\n                <h2>Cars here:</h2>\r\n                <Row>\r\n                    {this.state.cars.length !== 0 ? this.state.cars.map(car =>\r\n                        <CarDescriptionComponent car={car} />\r\n                    ) : <Col>Garage empty</Col>}\r\n                </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nfunction CarDescriptionComponent(props) {\r\n    // car description component card\r\n    const { car } = props\r\n    return (\r\n        <Col sm={4}>\r\n            <div className=\"cars-div-white\" style={{ 'border': 'solid black 2px' }}>\r\n                <img src={car.image} alt=\"car\" width=\"100\" />\r\n                <h2 style={{ marginTop: '1vh' }}>{car.make}</h2>\r\n                <h3 style={{ marginTop: '1vh' }}>{car.driver}</h3>\r\n                <p>{car.fueltype}, {car.bodytype}, {car.seats} seaters, {car.colour}</p>\r\n                <h5>Php{car.costperhour} per hour</h5>\r\n                <h5>Number Plate: {car.numberplate}</h5>\r\n                <a href={`/admin/view/cars/${car._id}`}><b>Car ID: </b>{car._id}</a>\r\n            </div>\r\n        </Col>\r\n    );\r\n}\r\n\r\nexport default GoogleApiWrapper({\r\n    apiKey: process.env.REACT_APP_API_KEY\r\n})(ViewLocation);\r\n"]},"metadata":{},"sourceType":"module"}